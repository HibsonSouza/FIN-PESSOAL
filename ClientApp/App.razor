@using FinanceManager.ClientApp.Components.Authentication

<Router AppAssembly="@typeof(Program).Assembly">
    <Found Context="routeData">
        <AuthorizeRouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)">
            <NotAuthorized>
                @if (context.User.Identity?.IsAuthenticated != true)
                {
                    <RedirectToLogin />
                }
                else
                {
                    <p class="not-authorized">Você não está autorizado a acessar esta página.</p>
                }
            </NotAuthorized>
            <Authorizing>
                <div class="loading-indicator">
                    <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
                    <p>Autorizando...</p>
                </div>
            </Authorizing>
        </AuthorizeRouteView>
        <FocusOnNavigate RouteData="@routeData" Selector="h1" />
    </Found>
    <NotFound>
        <PageTitle>Página não encontrada</PageTitle>
        <LayoutView Layout="@typeof(MainLayout)">
            <MudContainer MaxWidth="MaxWidth.Medium" Class="pa-8 mt-16">
                <MudPaper Elevation="3" Class="pa-8 text-center">
                    <MudText Typo="Typo.h4" Class="mb-4">404 - Página não encontrada</MudText>
                    <MudText Typo="Typo.body1" Class="mb-6">A página que você está procurando não existe ou foi removida.</MudText>
                    <MudButton Variant="Variant.Filled" Color="Color.Primary" Href="/" Class="mx-auto">Voltar para a página inicial</MudButton>
                </MudPaper>
            </MudContainer>
        </LayoutView>
    </NotFound>
</Router>

<style>
    .loading-indicator {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
    }
    
    .loading-indicator p {
        margin-top: 16px;
        font-size: 18px;
    }
    
    .not-authorized {
        text-align: center;
        margin-top: 48px;
        color: #f44336;
        font-size: 24px;
    }
</style>